{"version":3,"names":[],"mappings":"","sources":["js/lib/handlebars/handlebars-jquery.js"],"sourcesContent":["/**\r\n * 集成模板数据插件\r\n */\r\n(function($){\r\n\tvar compiled = {};\r\n\t/**\r\n\t * 直接使用模板替换当前元素的html内容\r\n     * 操作后会将元素中原模板内容清除 同时将模板保存到 data('template') 数据保存在 data('tplData')\r\n\t * @type {Function}\r\n\t */\r\n\t$.fn.template = $.fn.tpl = function(data){\r\n        var me = $(this);\r\n        //获取模板\r\n        var template = me.data('template');\r\n        if(me.data('template')){\r\n            template = me.data('template');\r\n        }else if ($(this).hasClass('template')){\r\n            template = me.html();\r\n            me.html('');\r\n            me.removeClass('template');\r\n        }else{\r\n            template = me.find('.template').first().html();\r\n        }\r\n\t\t//保存模板\r\n        $(this).data('template',template);\r\n\r\n\t\tif(!compiled[template]) compiled[template] = Handlebars.compile(template);\r\n\t\t$(this).html(compiled[template](data)).data('tplData',data);\r\n\t};\r\n\t$.fn.template1 = function(data){\r\n\t\tvar template = $.trim($(this).first().html());\r\n\t\tif(compiled[template] == undefined){\r\n\t\t\tcompiled[template] = Handlebars.compile(template);\r\n\t\t}\r\n\t\treturn $(compiled[template](data));\r\n\t};\r\n\t$.fn.toHtml = function(data){\r\n\t\tvar template = $.trim($(this).first().html());\r\n\t\tif(!compiled[template]) compiled[template] = Handlebars.compile(template);\r\n\t\treturn $(compiled[template](data));\r\n\t}\r\n\r\n    $.extend({\r\n        toHtml:function(template,data){\r\n            compiled[template] = Handlebars.compile(template);\r\n            return $(compiled[template](data));\r\n        }\r\n    });\r\n\r\n    //demo\r\n\t//如果文本长度过长，以省略号显示,截取长度参数为trunLen\r\n\tHandlebars.registerHelper('formatTextLength', function(text,trunLen){\r\n\t\tvar omitStr = \"……\";\r\n\t\tif(text!=undefined){\r\n\t\t\tvar newText = $.trim(text);\r\n\t\t\tif(newText.length>trunLen){\r\n\t\t\t\treturn newText.substr(0,trunLen)+omitStr;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn text;\r\n\t});\r\n\r\n})(jQuery);\r\n"],"file":"handlebars-jquery.js"}