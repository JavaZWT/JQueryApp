{"version":3,"names":[],"mappings":"","sources":["js/utils/GlobalValue.js"],"sourcesContent":["/**\n * 存储全局变量\n * \n */\n(function() {\n\ttry {\n\t\t// 存储全局变量\n\t\twindow.G = window.G || {};\n\n\t\t// 需要存储的变量 所有需要存储的变量必须在此处声明 如果不声明 则无法赋值\n\t\tvar keys = [ {\n\t\t\tname : 'operationType',//操作类型 0:新增 1:修改 2:复制 3:查看\n\t\t}, {\n\t\t\tname : 'deviceID',//设备ID\n\t\t} ];\n\t\t/**\n\t\t * 清空数据\n\t\t * @param type 默认为null 只清空本处声明的数据 all:清空sessionStorage\n\t\t */\n\t\tG.clear = function(type) {\n\t\t\tif (type == 'all') {\n\t\t\t\tsessionStorage.clear();\n\t\t\t} else {\n\t\t\t\tfor (var i = 0; i < keys.length; i++) {\n\t\t\t\t\tsessionStorage.removeItem(keys[i].name);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tG.serialize = function(keyArray) {\n\t\t\tvar data = \"\";\n\t\t\tif (keyArray != undefined && keyArray != null && keyArray) {\n\t\t\t\tfor (var i = 0; i < keyArray.length; i++) {\n\t\t\t\t\tdata += keyArray[i] + sessionStorage[keyArray[i]] + \"&\";\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor (var i = 0; i < keys.length; i++) {\n\t\t\t\t\tvar key = keys[i].name;\n\t\t\t\t\tvar value = sessionStorage[keys[i].name];\n\t\t\t\t\tif (key != undefined && key != null && key != \"\"\n\t\t\t\t\t\t\t&& value != undefined && value != null\n\t\t\t\t\t\t\t&& value != \"\") {\n\t\t\t\t\t\tdata += key + \"=\" + value + \"&\";\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn data;\n\t\t}\n\t\tfor (var i = 0; i < keys.length; i++) {\n\t\t\t// 保存变量 防止取值错误\n\t\t\t(function(data) {\n\t\t\t\t// 为全局变量增加存取器属性\n\t\t\t\tObject.defineProperty(G, data.name, {\n\t\t\t\t\tget : function() {\n\t\t\t\t\t\treturn sessionStorage[data.name];\n\t\t\t\t\t},\n\t\t\t\t\tset : function(value) {\n\t\t\t\t\t\t// 如果name 属性为数组 说明改值需要设置多个参数\n\t\t\t\t\t\tif (Array.isArray(data.name)) {\n\t\t\t\t\t\t\tfor (var j = 0; j < data.name.length; j++) {\n\t\t\t\t\t\t\t\tsessionStorage[data.name[j]] = value;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsessionStorage[data.name] = value;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t})(keys[i]);\n\t\t}\n\n\t\t//禁止对G变量进行扩展\n\t\tif (Object.preventExtensions)\n\t\t\tObject.preventExtensions(G);\n\t} catch (error) {\n\t\tif (window.console)\n\t\t\tconsole.error(\"G全局变量没有加载\", error);\n\t}\n})();"],"file":"GlobalValue.js"}